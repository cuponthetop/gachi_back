<!DOCTYPE html>
<html>

<head>
  <!--
  head에 기술하는 것은 다음 규칙에 따른다.
  1. 타이틀
  2. 메타 태그
  3. 파비콘
  4. 제이쿼리
  5. 웹 폰트
  6. css
  7. 페이지별 스타일 시트
  8. 구글 애널리틱스
  9. 페이스북 픽셀
    -->

  <!--1 타이틀-->
  <title>가치 - 공연을 함께</title>

  <!--2 메타 태그-->
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
  <meta name="theme-color" content="#fff">
  <meta property="og:url" content="">
  <meta property="og.title" content="가치">
  <meta property="og:description" content="가치에서 공연을 가치즐겨보세요">
  <meta property="og:type" content="website">
  <meta property="og:image" content="">
  <meta content="telephone=no" name="format-detection">

  <!--3 파비콘-->
  <link rel="shortcut icon" href="">
  <link rel="apple-touch-icon" href="">

  <!--4 제이쿼리-->
  <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>

  <!--5 웹 폰트-->
  <link href="" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Baloo+Bhaina" rel="stylesheet">
  <!--6-1-1 네비게이션 레벨1 css-->
  <link href="/css/nav/nav_level1.css" rel="stylesheet" type="text/css" />

  <link href="/css/nav/nav_level2.css" rel="stylesheet" type="text/css" />

  <link href="/css/nav/nav_level3.css" rel="stylesheet" type="text/css" />

  <link href="/css/nav/nav_level4.css" rel="stylesheet" type="text/css" />

  <link href="/css/detail/detail.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript" src="/vue/vue.js"></script>
  <script type="text/javascript" src="/moment/moment.js"></script>
  <script type="text/javascript" src="/lodash/lodash.js"></script>

  <script src="/js/common/common.js"></script>

</head>

<body>

  <% include ../nav/nav_level1.ejs %>

    <% include ../detail/detail-festival.ejs %>

      <script>
        var detail = new Vue({
          el: '#detail',
          data: {
            fetched: false,
            festival: { image: '' },
            showDetail: false,
            collapsible: false
          },
          created: function () {
            this.fetchFestivalInfo("<%=fid %>");
          },
          methods: {
            fetchFestivalInfo: function (fid) {
              $.ajax({
                type: 'GET',
                url: gachi.GACHI_URL + 'v1/festival/' + fid,
                dataType: 'json'
              }).then(function (festival) {
                console.log(festival);
                this.festival = festival;
                this.fetched = true;
              }.bind(this)).fail(function (error) {
                console.error(JSON.stringify(error));
              })
            },
            showMore: function () {
              $('#intro').css('height', 'auto');
              this.toggleDetail();
            },
            showLess: function () {
              $('#intro').css('height', '50px');
              this.toggleDetail();
            },
            toggleDetail: function () {
              this.showDetail = !this.showDetail;
            },
            moment: function (date) {
              return moment(date);
            }
          },
          updated: function () {
            this.collapsible = $('#intro')[0].scrollHeight > $('#intro').innerHeight();
          },
          computed: {
            showMoreDiv: {
              get: function () {
                return !this.showDetail && this.collapsible;
              }
            },
            showLessDiv: {
              get: function () {
                return this.showDetail && this.collapsible;
              }
            }
          }
        });
      </script>
</body>

</html>